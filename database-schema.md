# Database Schema (MongoDB / Mongoose)

This project uses **MongoDB** as the database.  
Below is the equivalent schema representation of SQL tables using **Mongoose models**.

---

## 1. Users Collection (`users`)

| Field                 | Type     | Required | Notes                                      |
| --------------------- | -------- | -------- | ------------------------------------------ |
| `_id`                 | ObjectId | ✔        | Primary key (auto-generated by MongoDB)    |
| `name`                | String   | ✔        | Max length 255                             |
| `email`               | String   | ✔        | Unique, lower-cased, validated as email    |
| `password`            | String   | ✔        | Hashed with bcrypt                         |
| `profile_picture_url` | String   | ✖        | Optional; validated URL (png/jpg/gif/etc.) |
| `created_at`          | Date     | ✔        | Auto-generated by Mongoose timestamps      |
| `updated_at`          | Date     | ✔        | Auto-generated by Mongoose timestamps      |

**Mongoose Model:**

```js
const mongoose = require("mongoose");

const userSchema = mongoose.Schema(
  {
    name: {
      type: String,
      required: true,
    },
    email: {
      type: String,
      required: true,
      unique: true,
    },
    password: {
      type: String,
      required: true,
    },
    profile_picture_url: {
      type: String,
    },
  },
  {
    timestamps: { createdAt: "created_at", updatedAt: "updated_at" },
  }
);

module.exports = mongoose.model("User", userSchema);
```

## 2. Posts Collection (`posts`)

| Field        | Type     | Required | Notes                                   |
| ------------ | -------- | -------- | --------------------------------------- |
| `_id`        | ObjectId | ✔        | Primary key (auto-generated by MongoDB) |
| `user_id`    | ObjectId | ✔        | References users.\_id                   |
| `title`      | String   | ✔        | Post title                              |
| `content`    | String   | ✔        | Post content                            |
| `image`      | String   | ✖        | File path or URL                        |
| `video`      | String   | ✖        | File path or URL (eg, .mp4)             |
| `created_at` | Date     | ✔        | Auto-generated by Mongoose timestamps   |
| `updated_at` | Date     | ✔        | Auto-generated by Mongoose timestamps   |

**Mongoose Model:**

```js
const mongoose = require("mongoose");

const postSchema = new mongoose.Schema(
  {
    user_id: {
      type: mongoose.Schema.Types.ObjectId,
      ref: "User",
      required: true,
    },
    title: { type: String, required: true },
    content: { type: String, required: true },
    image: { type: String },
    video: { type: String },
  },
  {
    timestamps: { createdAt: "created_at", updatedAt: "updated_at" },
  }
);

module.exports = mongoose.model("Post", postSchema);
```

## 3. Comments Collection (`comments`)

| Field        | Type     | Required | Notes                                   |
| ------------ | -------- | -------- | --------------------------------------- |
| `_id`        | ObjectId | ✔        | Primary key (auto-generated by MongoDB) |
| `post`       | ObjectId | ✔        | References posts.\_id                   |
| `user_id`    | ObjectId | ✔        | References users.\_id                   |
| `content`    | String   | ✔        | Comment content                         |
| `created_at` | Date     | ✔        | Default: `Date.now()`                   |

**Mongoose Model:**

```js
const mongoose = require("mongoose");

const commentSchema = new mongoose.Schema({
  post: { type: mongoose.Schema.Types.ObjectId, ref: "Post", required: true },
  user_id: {
    type: mongoose.Schema.Types.ObjectId,
    ref: "User",
    required: true,
  },
  content: { type: String, required: true },
  created_at: { type: Date, default: Date.now },
});

module.exports = mongoose.model("Comment", commentSchema);
```

## 4. Reactions Collection (`reactions`)

| Field        | Type     | Required | Notes                                   |
| ------------ | -------- | -------- | --------------------------------------- |
| `_id`        | ObjectId | ✔        | Primary key (auto-generated by MongoDB) |
| `post`       | ObjectId | ✔        | References posts.\_id                   |
| `user`       | ObjectId | ✔        | References users.\_id                   |
| `created_at` | Date     | ✔        | Auto-generated by Mongoose timestamps   |
| `updated_at` | Date     | ✔        | Auto-generated by Mongoose timestamps   |

**Mongoose Model:**

```js
const mongoose = require("mongoose");

const reactionSchema = new mongoose.Schema(
  {
    post: { type: mongoose.Schema.Types.ObjectId, ref: "Post", required: true },
    user: { type: mongoose.Schema.Types.ObjectId, ref: "User", required: true },
  },
  { timestamps: true }
);

reactionSchema.index({ post: 1, user: 1 }, { unique: true });

module.exports = mongoose.model("Reaction", reactionSchema);
```
